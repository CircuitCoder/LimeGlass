<div class="view page">
  <div class="seal"></div>
  <div class="title">欢迎，{{ user.name }}</div>
  <div class="hint">当前没有新消息，请关注邮件通知，了解您的学测、面试状态更新</div>
  <div class="select primary-action">
    <button @click="$router.push({ name: 'info' })">查看个人信息</button>
    <button @click="$router.push({ name: 'list' })" v-if="user && user.isAdmin">注册列表</button>
    <button @click="$router.push({ name: 'reviewers' })" v-if="user && user.isAdmin">管理面试 &amp; 学测</button>
    <button @click="logout()">登出</button>
  </div>

  <div v-if="user && user.isReviewer">
    <div class="subtitle">面试列表</div>
    <router-link tag="div" :to="{ name: 'review', params: { id: e._id } }" class="review-entry" v-for="e of reviews">
      <div class="name">{{ e.name }}</div>
      <div v-for="(r, i) of e.rounds">
        <div class="hint" style="margin-top: 5px" v-if="e.rounds.length > 1"># {{ i+1 }}</div>
        <div class="status">{{ STATUS_MAP[r.result] }}</div>
        <div class="hint" style="margin-top: 5px">{{ r.notes }}</div>
      </div>
    </router-link>
    <div class="hint" v-if="reviews.length === 0">暂无</div>
  </div>

  <div v-if="user && !user.isReviewer && user.rounds">
    <div class="subtitle">面试列表</div>
    <router-link tag="div" :to="{ name: 'answer', params: { iter: user.rounds.length - i - 1 } }" class="review-entry" v-for="(e, i) of user.rounds.slice().reverse()">
      <div class="name">第 {{ user.rounds.length - i }} 轮</div>

      <div class="status" v-if="e.questions === ''">学测题目准备中...</div>
      <div class="status" v-if="e.questions !== '' && e.answers === ''">学测题目未作答</div>
      <div class="status" v-if="e.answers !== ''">学测题目已完成, {{ STATUS_MAP[e.result] }}</div>

      <br><div class="hint">面试官</div>
      <div class="reviewer" v-for="r of e.reviewers" @click.stop style="cursor: default">
        {{ r.name }} <small>{{ r.email }}</small> <small>{{ r.phone }}</small>
      </div>
    </router-link>
  </div>

  <div class="subtitle">修改密码</div>
  <div class="input-hint">原密码</div>
  <input v-model="oldpass" type="password">
  <div class="input-hint">新密码</div>
  <input v-model="newpass" type="password">
  <button @click="updatePass()">修改密码</button>
</div>
